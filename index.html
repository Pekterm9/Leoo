<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Leoo</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family:'Segoe UI',sans-serif;
}

body{
    display:flex;
    height:100vh;
    background:#f4f6f9;
}

/* SIDEBAR */

.sidebar{
    width:260px;
    background:#111827;
    color:white;
    padding:40px 25px;
    display:flex;
    flex-direction:column;
}

.sidebar h1{ font-size:36px; }

.sidebar p{
    font-size:13px;
    color:#9ca3af;
    margin-bottom:50px;
}

.nav-btn{
    padding:12px;
    margin:8px 0;
    border:none;
    border-radius:10px;
    background:#1f2937;
    color:white;
    cursor:pointer;
    transition:0.2s;
}

.nav-btn:hover{ background:#374151; }

.active{ border:2px solid #facc15; }

/* WORKSPACE */

.workspace{
    flex:1;
    padding:40px;
    overflow-y:auto;
    position:relative;
    z-index:1;
}

.hidden{ display:none; }

.topbar{
    display:flex;
    justify-content:flex-end;
    margin-bottom:20px;
}

.new-btn{
    background:#111827;
    color:white;
    padding:10px 18px;
    border:none;
    border-radius:8px;
    cursor:pointer;
}

.new-btn:hover{ opacity:0.85; }

/* ITEMS */

.item{
    display:flex;
    justify-content:space-between;
    align-items:center;
    background:white;
    padding:15px 20px;
    border-radius:12px;
    margin:12px 0;
    box-shadow:0 4px 10px rgba(0,0,0,0.05);
    transition:0.2s;
}

.item:hover{ transform:translateY(-2px); }

.item-left{
    display:flex;
    align-items:center;
}

.checkbox{
    width:20px;
    height:20px;
    border-radius:6px;
    border:2px solid #111827;
    margin-right:15px;
    cursor:pointer;
    background:white;
    transition:0.2s;
}

.checkbox:hover{ background:#111827; }

.badge{
    font-size:12px;
    padding:4px 10px;
    border-radius:20px;
}

.orange{
    background:#fff7ed;
    color:#ea580c;
}

.red{
    background:#fef2f2;
    color:#dc2626;
}

/* MODAL */

.modal-bg{
    position:fixed;
    inset:0;
    backdrop-filter:blur(6px);
    background:rgba(0,0,0,0.2);
    display:none;
    align-items:center;
    justify-content:center;
    z-index:1000;
}

.modal{
    background:white;
    padding:30px;
    width:420px;
    border-radius:20px;
    animation:fadeIn 0.2s ease;
}

@keyframes fadeIn{
    from{transform:scale(0.95);opacity:0;}
    to{transform:scale(1);opacity:1;}
}

.modal h2{ margin-bottom:20px; }

.modal input{
    width:100%;
    padding:10px;
    margin:10px 0;
    border-radius:8px;
    border:1px solid #ccc;
}

.modal button{
    width:100%;
    padding:10px;
    margin-top:10px;
    border:none;
    border-radius:8px;
    cursor:pointer;
}

.create-btn{
    background:#111827;
    color:white;
}

.cancel-btn{
    background:#e5e7eb;
}

/* STATS */

canvas{
    background:white;
    padding:20px;
    border-radius:12px;
    box-shadow:0 4px 10px rgba(0,0,0,0.05);
}
</style>
</head>

<body>

<div class="sidebar">
    <h1>Leoo</h1>
    <p>Think smarter, plan wiser</p>

    <button class="nav-btn active" onclick="switchWorkspace('tasks')">Tasks</button>
    <button class="nav-btn" onclick="switchWorkspace('goals')">Goals</button>
    <button class="nav-btn" onclick="switchWorkspace('stats')">Statistics</button>
</div>

<div class="workspace" id="tasksWorkspace">
    <div class="topbar">
        <button class="new-btn" onclick="openModal()">+ New</button>
    </div>
    <div id="tasksList"></div>
</div>

<div class="workspace hidden" id="goalsWorkspace">
    <div class="topbar">
        <button class="new-btn" onclick="openModal()">+ New</button>
    </div>
    <div id="goalsList"></div>
</div>

<div class="workspace hidden" id="statsWorkspace">
    <h2>Monthly Completion</h2>
    <canvas id="statsChart"></canvas>
</div>

<div class="modal-bg" id="modalBg">
    <div class="modal">
        <h2 id="modalTitle">New Task</h2>
        <input type="text" id="itemInput" placeholder="Type here">
        <input type="date" id="dateInput">
        <button class="create-btn" onclick="createItem()">Create</button>
        <button class="cancel-btn" onclick="closeModal()">Cancel</button>
    </div>
</div>

<script>
const TASKS_KEY="leoo_tasks";
const GOALS_KEY="leoo_goals";
const STATS_KEY="leoo_stats";

let tasks=JSON.parse(localStorage.getItem(TASKS_KEY))||[];
let goals=JSON.parse(localStorage.getItem(GOALS_KEY))||[];
let completedData=JSON.parse(localStorage.getItem(STATS_KEY))||{tasks:{},goals:{}};

let currentWorkspace="tasks";
let chart;

/* ---------- SAVE ---------- */
function save(){
    localStorage.setItem(TASKS_KEY,JSON.stringify(tasks));
    localStorage.setItem(GOALS_KEY,JSON.stringify(goals));
    localStorage.setItem(STATS_KEY,JSON.stringify(completedData));
}

/* ---------- SWITCH WORKSPACE ---------- */
function switchWorkspace(type){
    currentWorkspace=type;

    document.querySelectorAll(".workspace").forEach(w=>w.classList.add("hidden"));
    document.querySelectorAll(".nav-btn").forEach(b=>b.classList.remove("active"));

    if(type==="tasks"){
        tasksWorkspace.classList.remove("hidden");
        document.querySelectorAll(".nav-btn")[0].classList.add("active");
    }
    if(type==="goals"){
        goalsWorkspace.classList.remove("hidden");
        document.querySelectorAll(".nav-btn")[1].classList.add("active");
    }
    if(type==="stats"){
        statsWorkspace.classList.remove("hidden");
        document.querySelectorAll(".nav-btn")[2].classList.add("active");
        updateChart();
    }
}

/* ---------- MODAL ---------- */
function openModal(){
    document.getElementById("modalBg").style.display="flex";
    itemInput.value="";
    dateInput.value="";
    if(currentWorkspace==="tasks"){
        modalTitle.innerText="New Task";
        dateInput.style.display="block";
    } else {
        modalTitle.innerText="New Goal";
        dateInput.style.display="none";
    }
}

function closeModal(){
    document.getElementById("modalBg").style.display="none";
}

/* ---------- CREATE ---------- */
function createItem(){
    const text=itemInput.value.trim();
    if(!text) return;

    if(currentWorkspace==="tasks"){
        tasks.push({text,date:dateInput.value||null});
        renderTasks();
    } else {
        goals.push({text});
        renderGoals();
    }

    save();
    closeModal();
}

/* ---------- RENDER TASKS ---------- */
function renderTasks(){
    tasksList.innerHTML="";

    tasks.forEach((t,i)=>{
        const div=document.createElement("div");
        div.className="item";

        const left=document.createElement("div");
        left.className="item-left";

        const checkbox=document.createElement("button");
        checkbox.className="checkbox";
        checkbox.type="button";
        checkbox.onclick=()=>complete(i,"tasks");

        const span=document.createElement("span");
        span.innerText=t.text;

        left.appendChild(checkbox);
        left.appendChild(span);

        const right=document.createElement("div");

        if(t.date){
            let today=new Date();
            today.setHours(0,0,0,0);
            let due=new Date(t.date);
            due.setHours(0,0,0,0);
            let diff=Math.ceil((due-today)/(1000*60*60*24));

            const badge=document.createElement("span");
            badge.className="badge";

            if(diff===0){
                badge.classList.add("red");
                badge.innerText="Due Today";
            } else if(diff===1){
                badge.classList.add("orange");
                badge.innerText="1 Day Left";
            } else if(diff>1){
                badge.innerText=diff+" Days Left";
            } else {
                badge.classList.add("red");
                badge.innerText="Expired";
            }

            right.appendChild(badge);
        }

        div.appendChild(left);
        div.appendChild(right);
        tasksList.appendChild(div);
    });
}

/* ---------- RENDER GOALS ---------- */
function renderGoals(){
    goalsList.innerHTML="";

    goals.forEach((g,i)=>{
        const div=document.createElement("div");
        div.className="item";

        const left=document.createElement("div");
        left.className="item-left";

        const checkbox=document.createElement("button");
        checkbox.className="checkbox";
        checkbox.type="button";
        checkbox.onclick=()=>complete(i,"goals");

        const span=document.createElement("span");
        span.innerText=g.text;

        left.appendChild(checkbox);
        left.appendChild(span);
        div.appendChild(left);

        goalsList.appendChild(div);
    });
}

/* ---------- COMPLETE ---------- */
function complete(index,type){
    const month=new Date().toLocaleString('default',{month:'long'});
    if(!completedData[type][month]) completedData[type][month]=0;
    completedData[type][month]++;

    if(type==="tasks"){
        tasks.splice(index,1);
        renderTasks();
    } else {
        goals.splice(index,1);
        renderGoals();
    }

    save();
}

/* ---------- CHART ---------- */
function updateChart(){
    if(chart) chart.destroy();

    const months=["January","February","March","April","May","June","July","August","September","October","November","December"];

    chart=new Chart(statsChart,{
        type:"line",
        data:{
            labels:months,
            datasets:[
                {
                    label:"Tasks Completed",
                    data:months.map(m=>completedData.tasks[m]||0),
                    borderWidth:3
                },
                {
                    label:"Goals Completed",
                    data:months.map(m=>completedData.goals[m]||0),
                    borderWidth:3
                }
            ]
        }
    });
}

/* ---------- INIT ---------- */
renderTasks();
renderGoals();
</script>

</body>
</html>
